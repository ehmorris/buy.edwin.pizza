$(function() {
  var handler = StripeCheckout.configure({
    locale: 'auto',
    key: '<%= ENV["STRIPE_PUBLISHABLE_KEY"] %>',
    token: function(token) {
      // post to /charge with token, price, stripeToken, and description
    }
  });

  $('[data-purchase-button]').on('click', function(e) {
    var button_data = $(this).data();

    handler.open({
      name: 'buy.edwin.pizza',
      description: button_data.desc,
      amount: button_data.price,
      allowRememberMe: false
    });
  });
});
